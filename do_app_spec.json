{
  "spec": {
    "name": "chatbotanalyticslab-app",
    "region": "fra",
    "services": [
      {
        "name": "api",
        "github": {
          "repo": "arslanmit/chatbotAnalyticsLab",
          "branch": "main",
          "deploy_on_push": true
        },
        "source_dir": "/",
        "environment_slug": "python",
        "instance_size_slug": "apps-s-1vcpu-0.5gb",
        "instance_count": 1,
        "http_port": 8080,
        "run_command": "uvicorn src.api.app:app --host 0.0.0.0 --port $PORT",
        "envs": [
          {
            "key": "DATABASE_URL",
            "value": "sqlite:///data/chatbot_analytics.db",
            "scope": "RUN_AND_BUILD_TIME"
          },
          {
            "key": "DATASET_DIR",
            "value": "/workspace/Dataset",
            "scope": "RUN_AND_BUILD_TIME"
          },
          {
            "key": "MODEL_CACHE_DIR",
            "value": "/workspace/models/cache",
            "scope": "RUN_AND_BUILD_TIME"
          },
          {
            "key": "ALERT_CHANNELS",
            "value": "log",
            "scope": "RUN_AND_BUILD_TIME"
          }
        ],
        "routes": [
          {
            "path": "/api",
            "preserve_path_prefix": false
          }
        ]
      },
      {
        "name": "dashboard",
        "github": {
          "repo": "arslanmit/chatbotAnalyticsLab",
          "branch": "main",
          "deploy_on_push": true
        },
        "source_dir": "/",
        "environment_slug": "python",
        "instance_size_slug": "apps-s-1vcpu-0.5gb",
        "instance_count": 1,
        "http_port": 8080,
        "run_command": "streamlit run dashboard/app.py --server.headless true --server.port $PORT --server.address 0.0.0.0",
        "envs": [
          {
            "key": "STREAMLIT_SERVER_HEADLESS",
            "value": "true",
            "scope": "RUN_AND_BUILD_TIME"
          },
          {
            "key": "DATASET_DIR",
            "value": "/workspace/Dataset",
            "scope": "RUN_AND_BUILD_TIME"
          },
          {
            "key": "MODEL_CACHE_DIR",
            "value": "/workspace/models/cache",
            "scope": "RUN_AND_BUILD_TIME"
          }
        ],
        "routes": [
          {
            "path": "/",
            "preserve_path_prefix": false
          }
        ]
      }
    ],
    "alerts": [
      {
        "rule": "DEPLOYMENT_FAILED"
      },
      {
        "rule": "DOMAIN_FAILED"
      }
    ],
    "features": [
      "buildpack-stack=ubuntu-22"
    ]
  }
}
